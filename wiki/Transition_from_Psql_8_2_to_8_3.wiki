#summary How to move an existing Nurpawiki installation from Postgresql 8.2 base to 8.3

== BACKUP! ==
 * Take backups of your DB before attempting to do anything.

== Upgrade Nurpawiki to latest version (1.2 at minimum) ==
See [Upgrading upgrade instructions]

Upgrading Nurpawiki to its latest version will modify the existing Nurpawiki database schema so that the data is easier carried over to a newer Postgresql version.

Before continuing, ensure that your Nurpawiki DB has upgraded properly and that is is working as expected.

== Export the database ==
Export the data out of your DB:

 * `pg_dump -U postgres -W -h localhost -n nw nurpawiki > db_dump.txt`

Note that only the contents of the DB schema `nw` are carried over to the new installation.

== Upgrade Postgresql ==
Upgrade your Postgresql installation.

= Massage the DB dump to make it work on Postgresql 8.3 =
The export from older Postgresql 8.2 version does not work as-is on 8.3.

== Restore Nurpawiki ==
 * `dropdb nurpawiki`
 * `createdb -E UTF-8 nurpawiki`
 * `psql nurpawiki < db_dump.txt`

== Launch Nurpawiki ==
Point your browser to the Nurpawiki main page.