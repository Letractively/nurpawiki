#summary How to install Postgresql and the nurpawiki DB on Debian.

= Configuring Postgresql for Nurpawiki =

== Install Postgresql and postgresql OCaml bindings ==
  * `apt-get install postgresql-8.2` (I've only tested with 8.x versions, so if the default is 7.4, something might not wrong)
  * `apt-get install postgresql-contrib` (for tsearch2)
  * `apt-get install libpq-dev` (for OCaml bindings, remember to install bindings package `godi-postgresql` from GODI)

== Create DB & configure ==

When creating databases, you must ensure that the database will be in `en_US.UTF-8` locale, otherwise tsearch2 will not work.  If your locale is en_US (run `locale` to find out), the databases should be automatically correctly configured.

See [DatabaseInstallationHacks hacks] if you have reason to doubt this is not so.

=== Install db and configure ===

Enable localhost access to the database without a password:

Edit `/etc/postgresql/8.2/main/pg_hba.conf` like so (TODO what's a better way to do this??!):

{{{
- host    all         all         127.0.0.1/32          md5
+ host    all         all         127.0.0.1/32          trust
}}}

As user `postgres`, do:
  * `createdb -h localhost -E UTF-8 nurpawiki`
  * `psql nurpawiki < nurpawiki/schema.psql` (setup nurpawiki schema with tsearch2)

Make sure you choose the right Postgresql port when running `configure` for Nurpawiki.

And you're done!